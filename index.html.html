<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Flying Cat</title>
<style>
  html, body {
      margin: 0; padding: 0; overflow: hidden; height: 100%;
          background: #a8ddff;
              font-family: system-ui, sans-serif;
                }
                  canvas { width: 100vw; height: 100vh; display: block; }
                    #start {
                        position: fixed; top: 50%; left: 50%;
                            transform: translate(-50%, -50%);
                                background: #ffca28; color: #222;
                                    padding: 16px 28px; border-radius: 12px;
                                        cursor: pointer; font-weight: bold;
                                            font-size: 20px; box-shadow: 0 6px 0 #e2a800; z-index: 10;
                                              }
                                                #scoreboard {
                                                    position: fixed; top: 10px; left: 10px;
                                                        color: #fff; font-weight: bold;
                                                            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
                                                                z-index: 5;
                                                                  }
                                                                  </style>
                                                                  </head>
                                                                  <body>
                                                                  <canvas id="game"></canvas>
                                                                  <div id="scoreboard">
                                                                    <div id="score">Score: 0</div>
                                                                      <div id="best">Best: 0</div>
                                                                      </div>
                                                                      <div id="start">Start â€” Tap / Space</div>

                                                                      <script>
                                                                      (() => {
                                                                      const canvas = document.getElementById('game');
                                                                      const ctx = canvas.getContext('2d');
                                                                      const startBtn = document.getElementById('start');
                                                                      const scoreEl = document.getElementById('score');
                                                                      const bestEl = document.getElementById('best');

                                                                      function resize() {
                                                                        canvas.width = window.innerWidth;
                                                                          canvas.height = window.innerHeight;
                                                                          }
                                                                          window.addEventListener('resize', resize);
                                                                          resize();

                                                                          let W = canvas.width, H = canvas.height;
                                                                          const GRAVITY = 0.8, FLAP_V = -12, PIPE_SPEED = 3;
                                                                          const PIPE_GAP = Math.min(200, H / 4), PIPE_WIDTH = 90, PIPE_INTERVAL = 1500;

                                                                          let cat, pipes, running, lastPipeTime, score, bestScore, animationId;
                                                                          try { bestScore = parseInt(localStorage.getItem('flappyCatBest') || '0'); } catch(e) { bestScore = 0; }
                                                                          bestEl.textContent = "Best: " + bestScore;

                                                                          function reset() {
                                                                            W = canvas.width; H = canvas.height;
                                                                              cat = { x: W/5, y: H/2, w: 70, h: 55, vy: 0, rot: 0, flapTime: 0 };
                                                                                pipes = []; running = false; lastPipeTime = 0; score = 0;
                                                                                  scoreEl.textContent = "Score: 0";
                                                                                    cancelAnimationFrame(animationId);
                                                                                      drawStart();
                                                                                      }

                                                                                      function drawBackground() {
                                                                                        const g = ctx.createLinearGradient(0,0,0,H);
                                                                                          g.addColorStop(0, '#80d0ff');
                                                                                            g.addColorStop(1, '#cdeffd');
                                                                                              ctx.fillStyle = g;
                                                                                                ctx.fillRect(0,0,W,H);
                                                                                                  ctx.fillStyle = '#7ec850';
                                                                                                    ctx.fillRect(0, H-100, W, 100);
                                                                                                    }

                                                                                                    function drawCat() {
                                                                                                      ctx.save();
                                                                                                        const cx = cat.x + cat.w/2;
                                                                                                          const cy = cat.y + cat.h/2;
                                                                                                            ctx.translate(cx, cy);
                                                                                                              ctx.rotate(cat.rot);
                                                                                                                ctx.translate(-cx, -cy);

                                                                                                                  const bx = cat.x, by = cat.y, bw = cat.w, bh = cat.h;

                                                                                                                    // --- sayap bergerak naik-turun ---
                                                                                                                      const flapAngle = Math.sin(cat.flapTime / 5) * 0.4;

                                                                                                                        // sayap kiri
                                                                                                                          ctx.save();
                                                                                                                            ctx.translate(bx + 15, by + bh/2);
                                                                                                                              ctx.rotate(-flapAngle);
                                                                                                                                ctx.fillStyle = "rgba(255,255,255,0.9)";
                                                                                                                                  ctx.beginPath();
                                                                                                                                    ctx.moveTo(0, 0);
                                                                                                                                      ctx.quadraticCurveTo(-25, -15, -40, 0);
                                                                                                                                        ctx.quadraticCurveTo(-25, 15, 0, 0);
                                                                                                                                          ctx.fill();
                                                                                                                                            ctx.restore();

                                                                                                                                              // sayap kanan
                                                                                                                                                ctx.save();
                                                                                                                                                  ctx.translate(bx + bw - 15, by + bh/2);
                                                                                                                                                    ctx.rotate(flapAngle);
                                                                                                                                                      ctx.fillStyle = "rgba(255,255,255,0.9)";
                                                                                                                                                        ctx.beginPath();
                                                                                                                                                          ctx.moveTo(0, 0);
                                                                                                                                                            ctx.quadraticCurveTo(25, -15, 40, 0);
                                                                                                                                                              ctx.quadraticCurveTo(25, 15, 0, 0);
                                                                                                                                                                ctx.fill();
                                                                                                                                                                  ctx.restore();

                                                                                                                                                                    // tubuh kucing (gradasi warna)
                                                                                                                                                                      const grad = ctx.createLinearGradient(bx, by, bx + bw, by + bh);
                                                                                                                                                                        grad.addColorStop(0, "#f6c89f");
                                                                                                                                                                          grad.addColorStop(1, "#e4a972");
                                                                                                                                                                            ctx.fillStyle = grad;
                                                                                                                                                                              ctx.beginPath();
                                                                                                                                                                                ctx.ellipse(bx + bw/2, by + bh/2 + 5, bw/2.5, bh/2.2, 0, 0, Math.PI*2);
                                                                                                                                                                                  ctx.fill();

                                                                                                                                                                                    // kepala
                                                                                                                                                                                      ctx.fillStyle = "#fcd5b4";
                                                                                                                                                                                        ctx.beginPath();
                                                                                                                                                                                          ctx.arc(bx + 20, by + 10, 17, 0, Math.PI*2);
                                                                                                                                                                                            ctx.fill();

                                                                                                                                                                                              // telinga kiri & kanan
                                                                                                                                                                                                ctx.fillStyle = "#f6c89f";
                                                                                                                                                                                                  ctx.beginPath();
                                                                                                                                                                                                    ctx.moveTo(bx + 8, by - 2);
                                                                                                                                                                                                      ctx.lineTo(bx + 16, by - 18);
                                                                                                                                                                                                        ctx.lineTo(bx + 22, by - 2);
                                                                                                                                                                                                          ctx.closePath();
                                                                                                                                                                                                            ctx.fill();
                                                                                                                                                                                                              ctx.beginPath();
                                                                                                                                                                                                                ctx.moveTo(bx + 28, by - 2);
                                                                                                                                                                                                                  ctx.lineTo(bx + 24, by - 18);
                                                                                                                                                                                                                    ctx.lineTo(bx + 36, by - 2);
                                                                                                                                                                                                                      ctx.closePath();
                                                                                                                                                                                                                        ctx.fill();

                                                                                                                                                                                                                          // mata
                                                                                                                                                                                                                            ctx.fillStyle = "#333";
                                                                                                                                                                                                                              ctx.beginPath();
                                                                                                                                                                                                                                ctx.arc(bx + 14, by + 10, 3, 0, Math.PI*2);
                                                                                                                                                                                                                                  ctx.arc(bx + 26, by + 10, 3, 0, Math.PI*2);
                                                                                                                                                                                                                                    ctx.fill();

                                                                                                                                                                                                                                      // hidung & mulut
                                                                                                                                                                                                                                        ctx.fillStyle = "#e57373";
                                                                                                                                                                                                                                          ctx.beginPath();
                                                                                                                                                                                                                                            ctx.arc(bx + 20, by + 16, 2, 0, Math.PI*2);
                                                                                                                                                                                                                                              ctx.fill();
                                                                                                                                                                                                                                                ctx.strokeStyle = "#333";
                                                                                                                                                                                                                                                  ctx.lineWidth = 1;
                                                                                                                                                                                                                                                    ctx.beginPath();
                                                                                                                                                                                                                                                      ctx.moveTo(bx + 20, by + 18);
                                                                                                                                                                                                                                                        ctx.lineTo(bx + 20, by + 22);
                                                                                                                                                                                                                                                          ctx.moveTo(bx + 20, by + 22);
                                                                                                                                                                                                                                                            ctx.lineTo(bx + 16, by + 24);
                                                                                                                                                                                                                                                              ctx.moveTo(bx + 20, by + 22);
                                                                                                                                                                                                                                                                ctx.lineTo(bx + 24, by + 24);
                                                                                                                                                                                                                                                                  ctx.stroke();

                                                                                                                                                                                                                                                                    // kumis
                                                                                                                                                                                                                                                                      ctx.beginPath();
                                                                                                                                                                                                                                                                        ctx.moveTo(bx + 6, by + 16);
                                                                                                                                                                                                                                                                          ctx.lineTo(bx + 14, by + 16);
                                                                                                                                                                                                                                                                            ctx.moveTo(bx + 26, by + 16);
                                                                                                                                                                                                                                                                              ctx.lineTo(bx + 34, by + 16);
                                                                                                                                                                                                                                                                                ctx.stroke();

                                                                                                                                                                                                                                                                                  // ekor melengkung
                                                                                                                                                                                                                                                                                    ctx.strokeStyle = "#f6c89f";
                                                                                                                                                                                                                                                                                      ctx.lineWidth = 6;
                                                                                                                                                                                                                                                                                        ctx.beginPath();
                                                                                                                                                                                                                                                                                          ctx.moveTo(bx + bw - 8, by + bh/2 + 5);
                                                                                                                                                                                                                                                                                            ctx.quadraticCurveTo(bx + bw + 25, by + bh/2 - 10, bx + bw, by + bh/2 - 35);
                                                                                                                                                                                                                                                                                              ctx.stroke();

                                                                                                                                                                                                                                                                                                ctx.restore();
                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                function drawPipe(p) {
                                                                                                                                                                                                                                                                                                  ctx.fillStyle = '#2e8b57';
                                                                                                                                                                                                                                                                                                    ctx.fillRect(p.x, 0, PIPE_WIDTH, p.top);
                                                                                                                                                                                                                                                                                                      ctx.fillRect(p.x, H - p.bottom, PIPE_WIDTH, p.bottom);
                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                      function update() {
                                                                                                                                                                                                                                                                                                        cat.vy += GRAVITY;
                                                                                                                                                                                                                                                                                                          cat.y += cat.vy;
                                                                                                                                                                                                                                                                                                            cat.rot = Math.max(-0.5, Math.min(0.5, cat.vy * 0.02));
                                                                                                                                                                                                                                                                                                              cat.flapTime++;

                                                                                                                                                                                                                                                                                                                for (let i = pipes.length - 1; i >= 0; i--) {
                                                                                                                                                                                                                                                                                                                    const p = pipes[i];
                                                                                                                                                                                                                                                                                                                        p.x -= PIPE_SPEED;
                                                                                                                                                                                                                                                                                                                            if (!p.scored && p.x + PIPE_WIDTH < cat.x) {
                                                                                                                                                                                                                                                                                                                                  p.scored = true;
                                                                                                                                                                                                                                                                                                                                        score++;
                                                                                                                                                                                                                                                                                                                                              scoreEl.textContent = "Score: " + score;
                                                                                                                                                                                                                                                                                                                                                    if (score > bestScore) {
                                                                                                                                                                                                                                                                                                                                                            bestScore = score;
                                                                                                                                                                                                                                                                                                                                                                    localStorage.setItem("flappyCatBest", bestScore);
                                                                                                                                                                                                                                                                                                                                                                            bestEl.textContent = "Best: " + bestScore;
                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                          if (p.x + PIPE_WIDTH < -10) pipes.splice(i,1);
                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                              const now = performance.now();
                                                                                                                                                                                                                                                                                                                                                                                                if (now - lastPipeTime > PIPE_INTERVAL) {
                                                                                                                                                                                                                                                                                                                                                                                                    lastPipeTime = now;
                                                                                                                                                                                                                                                                                                                                                                                                        const minTop = 60;
                                                                                                                                                                                                                                                                                                                                                                                                            const maxTop = H - 100 - PIPE_GAP - minTop;
                                                                                                                                                                                                                                                                                                                                                                                                                const top = Math.floor(Math.random() * (maxTop - minTop + 1)) + minTop;
                                                                                                                                                                                                                                                                                                                                                                                                                    const bottom = H - 100 - top - PIPE_GAP;
                                                                                                                                                                                                                                                                                                                                                                                                                        pipes.push({ x: W + 10, top: top, bottom: bottom, scored: false });
                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                            if (cat.y + cat.h >= H - 100) gameOver();
                                                                                                                                                                                                                                                                                                                                                                                                                              if (cat.y <= 0) cat.y = 0;

                                                                                                                                                                                                                                                                                                                                                                                                                                for (const p of pipes) {
                                                                                                                                                                                                                                                                                                                                                                                                                                    if (rectIntersect(cat.x, cat.y, cat.w, cat.h, p.x, 0, PIPE_WIDTH, p.top) ||
                                                                                                                                                                                                                                                                                                                                                                                                                                            rectIntersect(cat.x, cat.y, cat.w, cat.h, p.x, H - p.bottom, PIPE_WIDTH, p.bottom)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                  gameOver();
                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                        function rectIntersect(ax,ay,aw,ah,bx,by,bw,bh) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                          return ax < bx + bw && ax + aw > bx && ay < by + bh && ay + ah > by;
                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                          function render() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                            drawBackground();
                                                                                                                                                                                                                                                                                                                                                                                                                                                              for (const p of pipes) drawPipe(p);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                drawCat();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                function loop() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  animationId = requestAnimationFrame(loop);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    update();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function start() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (running) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          running = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            lastPipeTime = performance.now() - 500;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              pipes = [];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                score = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  cat.y = H/2 - 30;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    cat.vy = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      cat.flapTime = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        startBtn.style.display = 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          animationId = requestAnimationFrame(loop);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          function gameOver() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            running = false;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              cancelAnimationFrame(animationId);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ctx.fillStyle = 'rgba(0,0,0,0.45)';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ctx.fillRect(0,0,W,H);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ctx.fillStyle = '#fff';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ctx.textAlign = 'center';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ctx.font = '48px system-ui';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.fillText('Game Over ðŸ˜¿', W/2, H/2 - 10);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ctx.font = '24px system-ui';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ctx.fillText('Score: ' + score, W/2, H/2 + 30);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                startBtn.textContent = "Restart â€” Tap / Space";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  startBtn.style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  function flap() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (!running) start();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      cat.vy = FLAP_V;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      window.addEventListener('keydown', e => { if (e.code === 'Space') { e.preventDefault(); flap(); } });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      canvas.addEventListener('mousedown', flap);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      canvas.addEventListener('touchstart', e => { e.preventDefault(); flap(); }, {passive:false});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      startBtn.addEventListener('click', start);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      reset();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      })();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      